# 트랜잭션 (Transaction)

#### 트랜잭션

- 데이터 처리의 한 단위
- 오라클 서버에서 발생하는 SQL 문들이 하나의 논리적인 작업 단위로써 성공하거나 실패하는 일련의 SQL문
- 오라클 서버는 트랜잭션을 근거로 데이터의 일관성을 보증
- 트랜잭션은 데이터를 일관되게 변경하는 DML 문장으로 구성됨 (COMMIT, ROLLBACK, SAVEPOINT)



#### 트랜잭션의 시작

- 실행 가능한 SQL 문장이 제일 처음 실행될 때



#### 트랜잭션의 종료

- COMMIT, ROLLBACK 할 때
- DDL, DCL 이 실행될 때 (자동 COMMIT)
- 기계 장애 또는 시스템 충돌
- DEADLOCK 발생
- 사용자가 정상 종료 



##### 자동 ROLLBACK이 발생하는 경우

- SQL*Plus를 비정상 종료했을 때

- 비정상적인 종료

  

	##### 자동 COMMIT이 발생 경우

- DDL, DCL 문장이 완료될 때

- 명시적인 COMMIT이나 ROLLBACK 없이 SQL*Plus 를 정상 종료했을 경우

  

#### COMMIT 

- 변경사항 저장



#### ROLLBACK

- 변경사항 취소



#### COMMIT, ROLLBACK 의 장점

- 데이터의 일관성을 제공 한다.

- 데이터를 영구적으로 변경하기 전에 데이터 변경을 확인하게 한다.

- 관련된 작업을 논리적으로 그룹화 할 수 있다.

- COMMIT, SAVEPOINT, ROLLBACK 문장으로 TRANSACTION의 논리를 제어할 수 있다.

  

#### COMMIT이나 ROLLBACK 이전의 데이터 상태

- 데이터 이전의 상태로 북구가 가능 하다.

- 현재 사용자는 SELECT문장으로 DML작업의 결과를 확인할 수 있다.

- 다른 사용자는 SELECT문장으로 현재 사용자 사용한 DML문장의 결과를 확인할 수 없다.

- 변경된 행은 LOCK이 설정 되어서 다른 사용자가 변경 할 수 없다.

  

#### COMMIT 이후의 데이터 상태

- 데이터베이스에 데이터를 영구적으로 변경
- 데이터의 이전 상태는 완전히 상실
- 모든 사용자가 결과를 볼 수 있다.
- 변경된 행의 LOCK이 해제되고 다른 사용자가 변경할 수 있다.
- 모든 SAVEPOINT는 제거 된다.
